

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>&lt;no title&gt; &mdash; Code-Cookbook 0.1 文档</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="4. }" href="Java%20Cookbook.html" />
    <link rel="prev" title="&lt;no title&gt;" href="Hive%20SQL50%E9%A2%98%E8%AE%B0%E5%BD%95.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Code-Cookbook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">大数据</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Bigdata/index.html">Bigdata</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Bigdata%20Tools/index.html">Bigdata Tools</a></li>
</ul>
<p class="caption"><span class="caption-text">博客</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Blogs</a></li>
</ul>
<p class="caption"><span class="caption-text">大数据辅助工具</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Auxiliary%20tools/index.html">Auxiliary tools</a></li>
</ul>
<p class="caption"><span class="caption-text">SQL相关</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../SQL/index.html">SQL</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Code-Cookbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Blogs</a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Blogs/IO流.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># <cite>IO Stream</cite></p>
<p>[TOC]</p>
<p>&lt;a id=top&gt;&lt;/a&gt;</p>
<p>## 字节流
- 分类:</p>
<blockquote>
<div><ul>
<li><dl>
<dt>字节输入流</dt><dd><ul>
<li><p>顶层父类:InputStream</p></li>
<li><dl>
<dt>用字节流读取文件</dt><dd><ul>
<li><p>FileInputStream</p></li>
<li><p>~~~
int len=-1;
byte[] buf = new byte[1024];
while((len=fis.read())!=-1)
{</p>
<blockquote>
<div><p>str = new String(buf,0,len);</p>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>字节输出流</dt><dd><ul class="simple">
<li><p>顶层父类:OutputStream</p></li>
<li><dl class="simple">
<dt>用字节流写文件</dt><dd><ul>
<li><p>FileOutputStream</p></li>
<li><p>bos.write(byte[] buf, int offset, int len)</p></li>
<li><p>如:bos.write(buf,0,len);</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>常用方法
- <cite>FileOutputStream</cite> 写</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>write(int b)</cite> 向文件中写入一个字节数据</p></li>
<li><p><cite>write(byte[] buf)</cite> 向文件中写入多个字节数据(把字节数组中的数据全部写入)</p></li>
<li><dl class="simple">
<dt><cite>write(byte[] buf, int offset, int len)</cite> 向文件中写入多个字节数据</dt><dd><ul>
<li><p><cite>byte[] buf</cite> : 是字节数组</p></li>
<li><p><cite>int offset</cite> : 索引位置(起始位置)</p></li>
<li><p><cite>int len</cite>    : 长度(偏移量),向后取len个字节的数据</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><cite>close()</cite> 关闭输出流</p></li>
<li><dl class="simple">
<dt>补充String类中的方法</dt><dd><ul>
<li><p>字符串转byte数组 即:<cite>String</cite> -&gt; <cite>byte[]</cite></p></li>
<li><p><cite>byte[] getBytes[]</cite></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>可能出现的问题以及解决办法:</dt><dd><ul>
<li><dl class="simple">
<dt>没有换行</dt><dd><ul>
<li><p>解决:在`write()`中添加”rn”</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>写入的数据将之前的存在的数据都覆盖了</dt><dd><ul>
<li><p>解决:<a href="#id1"><span class="problematic" id="id2">`</span></a>FileOutputStream类`的构造方法中有一个参数boolean append用来进行是否在原数据后追加写入，是的话，设置为true</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<ul>
<li><dl class="simple">
<dt><cite>FileInputStream</cite> 读</dt><dd><ul class="simple">
<li><p><cite>close()</cite> 关闭流</p></li>
<li><p><cite>int read()</cite> 读一个字节数据</p></li>
<li><p><cite>int read(byte[] bys)</cite> 读取多个字节,读取最多buf.length()个字节数据，并存储到 buf数组，返回实际读取到的字节数据个数</p></li>
<li><p><cite>int read(byte[] bys, int offset, int len)</cite> 从起始位置offset开始读取len个长度的字节</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl>
<dt>读写结合，一种高速的写方法</dt><dd><ul>
<li><dl>
<dt>示例:</dt><dd><p>~~~java
public class FileCopy {</p>
<blockquote>
<div><dl>
<dt>public static void main(String[] args) {</dt><dd><p>FileInputStream fis = null;
FileOutputStream fos = null;
try {</p>
<blockquote>
<div><p>fis = new FileInputStream(“D:\initialD.png”);
fos = new FileOutputStream(“D:\copy\initialD.jpg”);
byte[] buf = new byte[1024];
/*
//一个字节一个字节地读
int c ;
while ((c=fis.read())!=-1)</p>
<blockquote>
<div><blockquote>
<div><p>fos.write(c);</p>
</div></blockquote>
<p><a href="#id3"><span class="problematic" id="id4">*</span></a>/</p>
</div></blockquote>
<p>int len ;
while ((len = fis.read(buf)) != -1) {</p>
<blockquote>
<div><p>fos.write(buf, 0, len);</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<dl>
<dt>} catch (IOException e) {</dt><dd><p>e.printStackTrace();</p>
</dd>
<dt>} finally {</dt><dd><dl class="simple">
<dt>try {</dt><dd><p>assert fis != null;
fis.close();
assert fos != null;
fos.close();</p>
</dd>
<dt>} catch (IOException e) {</dt><dd><p>e.printStackTrace();</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</dd>
</dl>
<p>}</p>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>## &lt;a id=”jump”&gt;高效流&lt;/a&gt;
高效流:字节高效流、字符高效流
- 字节高效流：</p>
<blockquote>
<div><ul class="simple">
<li><p>本质:字节输入缓冲流只是提供缓冲区，本身不能读取文件，需要依赖于字节输入流实现读取数据</p></li>
<li><p>缓冲流内置一个缓冲区，默认大小是:8*1024(可以修改)</p></li>
<li><dl class="simple">
<dt>字节输入缓冲流:BufferedInputStream</dt><dd><ul>
<li><p>高效的字节输入流, 封装 普通的字节输入流, 提供缓冲区</p></li>
<li><p><cite>public BufferedInputStream(InputStream is)</cite></p></li>
<li><p>示例:<cite>BufferedInputStream bis = new BufferedInputStream(new FileInputStream(“file_path”))</cite></p></li>
<li><p>常用方法`read()`</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>字符输出缓冲流:BufferedOutputStream</dt><dd><ul>
<li><p>高效的字节输出流, 封装 普通的字节输出流, 提供缓冲区</p></li>
<li><p><cite>public BufferedOutputStream(OutputStream is)</cite></p></li>
<li><p>示例:<cite>BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(“file_path”))</cite></p></li>
<li><p>常用方法`write()`</p></li>
<li><p><cite>flush()</cite></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>字符高效流</dt><dd><ul>
<li><dl class="simple">
<dt>BufferedReader()</dt><dd><ul>
<li><p>BufferedReader() br = new BufferedReader(new FileReader(String Path/File file))</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>BufferedWriter()</dt><dd><ul>
<li><p>BufferedWtiter() bw = new BufferedWriter(new FileWriter(String Path/File file))</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>## 字符流
字符流:针对纯文本文件进行读写操作的流
- 本质:底层还是字节流(把字节流进行封装)
- 分类:</p>
<blockquote>
<div><ul>
<li><dl>
<dt>字符输入流</dt><dd><ul>
<li><p>顶层父类:Reader</p></li>
<li><dl>
<dt>读文件:FileReader</dt><dd><ul>
<li><p>FileReader fr = new FileReader(String path/ File file)</p></li>
<li><p>~~~
int len=-1;
char[] buf = new char[1024];
while((len = fr.read())!=-1)
{</p>
<blockquote>
<div><p>String Str = new String(buf,0,len);</p>
</div></blockquote>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>字符输出流</dt><dd><ul class="simple">
<li><p>顶层父类:Writer</p></li>
<li><dl class="simple">
<dt>写文件:FileWriter</dt><dd><ul>
<li><p>FileWriter fw = new FileWriter();</p></li>
<li><p>~~~
FileWriter fw = new FileWriter(String path/ File file);
fw.write(buf,0,len);
~~~</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><dl class="simple">
<dt>字符输出流:<a href="#id5"><span class="problematic" id="id6">`</span></a>FileWriter`类</dt><dd><ul>
<li><dl class="simple">
<dt>构造方法</dt><dd><ul>
<li><p><cite>FileWriter(String Path)</cite></p></li>
<li><p><cite>FileWriter(File file)</cite></p></li>
<li><p><cite>FileWriter(String path, boolean append)</cite></p></li>
<li><p><cite>FileWriter(File file, boolean b)</cite></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>常用方法</dt><dd><ul>
<li><p><cite>close()</cite></p></li>
<li><p><cite>write()</cite></p></li>
<li><p><cite>write(char[] cbuf, int offset, int len)</cite> 写入多个字符数据</p></li>
<li><p><cite>write(String str, int offset, int len)</cite> 把字符串中部分数写入到文件</p></li>
<li><p><cite>flush()</cite></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>字符输入流:<a href="#id7"><span class="problematic" id="id8">`</span></a>FileReader`类</dt><dd><ul>
<li><dl class="simple">
<dt>构造方法:</dt><dd><ul>
<li><p><cite>FileReader(File file)</cite></p></li>
<li><p><cite>FileReader(String path)</cite></p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>常用方法:</dt><dd><ul>
<li><p><cite>int read()</cite> //读取一个字符，需要转换为char</p></li>
<li><p><cite>int read(char[] cbuf)</cite> 读取多个字符，最多读cbuf.length个字符数据，返回实际读取到的字符个数</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>## 转换流
字符流内部有:编码表、内置缓冲区
字符流的本质是字节流
一个中文:GBK中占两个字节,UTF-8中占三个字节
- 功能:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>把字节流转换为字符流: <cite>InputStreamReader</cite></dt><dd><ul>
<li><p><cite>InputStreamReader(InputStream in)</cite></p></li>
<li><p><cite>InputStreamReader(InputStream in, String charsetName)</cite></p></li>
<li><p>InputStreamReader isr = new InputStreamReader(new FileInputStream(String Path))</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>把字符流转换为字节流: <cite>OutputStreamWriter</cite></dt><dd><ul>
<li><p><cite>OutputStreamWriter(OutputStream out)</cite> param:字节输出流(FileOutputStream)</p></li>
<li><p><cite>OutputStreamWriter(OutputStream out, String charsetName)</cite> params:字节输出流(FileOutputStream)、编码表名称</p></li>
<li><p>OutputStreamReader isr = new OutputStreamReader(new FileOutputStream(String Path))</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>### <cite>InputStreamReader</cite>:把字节流转换字符流的转换流
### <cite>OutputStreamWriter</cite>:把字符流转换为字节流的转换流</p>
<p>## 字符缓冲流
类似于高效流
- 字符缓冲流:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><cite>BufferedReader</cite> 字符输入缓冲流</dt><dd><ul>
<li><p><cite>BufferedReader(Reader in)</cite></p></li>
<li><p><cite>BufferedReader(Reader in.int size)</cite> <cite>params</cite>:字符输入流FileReader , 自定义缓冲区大小</p></li>
<li><p>特有方法:<cite>readLine()</cite> 读一行数据(以`rn`作为读取的结束符号)</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>BufferedWriter</cite> 字符输出缓冲流</dt><dd><ul>
<li><p><cite>BufferedWriter(Writer out)</cite></p></li>
<li><p><cite>BufferedWriter(Writer out, int size)</cite></p></li>
<li><p>特有方法:<cite>newLine()</cite>  -&gt; 相当于`rn`</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>## 总结:
### 字节流:
字节流是**万能流**，可以针对任何类型文件，如文本，视频，图片…
- 基础流，知道怎么用即可
- 开发中使用的高效流(借助基础流)</p>
<blockquote>
<div><ul>
<li><p>读文件: 针对多个字节数据的读取</p></li>
<li><p>写文件: 针对多个字节数据的写入</p></li>
<li><dl>
<dt>Template: [详细使用](#jump)</dt><dd><p>~~~
读:</p>
<blockquote>
<div><p>BufferedInputStream bis = new BufferedInputStream(new FileInputStream(“file_path”))
byte[] buf = new byte[1024];
int len=-1;
while((len=bis.read(buf))!=-1)
{</p>
<blockquote>
<div><p>bis.write(buf,0,len);</p>
</div></blockquote>
<p>}
flush();</p>
</div></blockquote>
<p>~~~</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>### 字符流
- 基础流:FileReader、FileWriter
- 缓冲流:</p>
<blockquote>
<div><ul>
<li><p>读文件: 针对多个字节进行读 -&gt; 读一行</p></li>
<li><p>写文件: 多个字节写入到文件 -&gt; 写一行</p></li>
<li><dl>
<dt>Template:</dt><dd><p>~~~
String line = null;
while((line = 输入流.readLine())!=null)
{</p>
<blockquote>
<div><p>输出流.write(line);
输出流.newLine();</p>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>### 转换流
在开发中当需要针对特殊编码(不是常用编码)的文件进行读写操作时
针对的是纯文本文件，非文本文件不能使用，使用后，非文本文件不能使用</p>
<p>## 序列化流
序列化:在java中书写的类，具备了序列化的特征，只有具备了序列化的特征才能实现对象的序列化
类需要实现一个序列化接口(Serializable接口)</p>
<p>[返回顶部](#top)</p>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Java%20Cookbook.html" class="btn btn-neutral float-right" title="4. }" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Hive%20SQL50%E9%A2%98%E8%AE%B0%E5%BD%95.html" class="btn btn-neutral float-left" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; 版权所有 2020-2020, roohom

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>